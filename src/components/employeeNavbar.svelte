<script lang="ts">
     import { goto } from "$app/navigation";
     import { PUBLIC_AUTH_URL } from "$env/static/public";

     export let active: string = "0";
     export let firstName: string = "";
     export let lastName: string = "";

     async function logout() {
          const res = await fetch(PUBLIC_AUTH_URL + "logout/", {
               method: "POST",
               credentials: "include",
               // essential to set the header
               headers: {
                    "Content-Type": "application/json",
               },
          });
          goto("auth/");
     }
</script>

<div
     class="grid sticky top-0 h-screen border-r-2 border-borderColor col-span-2 mr-2 p-8 pt-16"
>
     <!--Logo and navigation buttons-->
     <div>
          <svg
               width="150"
               height="60"
               viewBox="0 0 212 68"
               fill="none"
               xmlns="http://www.w3.org/2000/svg"
          >
               <path
                    d="M49.088 38.54C47.072 38.54 45.344 38.09 43.904 37.19C42.464 36.29 41.36 35.066 40.592 33.518C39.824 31.97 39.44 30.224 39.44 28.28C39.44 26.312 39.836 24.554 40.628 23.006C41.432 21.458 42.56 20.24 44.012 19.352C45.464 18.464 47.18 18.02 49.16 18.02C51.452 18.02 53.372 18.602 54.92 19.766C56.48 20.918 57.476 22.496 57.908 24.5L53.012 25.796C52.724 24.788 52.22 24.002 51.5 23.438C50.792 22.874 49.988 22.592 49.088 22.592C48.056 22.592 47.21 22.844 46.55 23.348C45.89 23.84 45.404 24.518 45.092 25.382C44.78 26.234 44.624 27.2 44.624 28.28C44.624 29.972 44.996 31.346 45.74 32.402C46.496 33.446 47.612 33.968 49.088 33.968C50.192 33.968 51.032 33.716 51.608 33.212C52.184 32.708 52.616 31.988 52.904 31.052L57.908 32.096C57.356 34.16 56.312 35.75 54.776 36.866C53.24 37.982 51.344 38.54 49.088 38.54ZM61.3409 38V11.54H66.2369V38H61.3409ZM80.6693 38.54C78.6773 38.54 76.9193 38.114 75.3953 37.262C73.8833 36.398 72.6953 35.216 71.8313 33.716C70.9793 32.204 70.5533 30.476 70.5533 28.532C70.5533 26.408 70.9733 24.56 71.8133 22.988C72.6533 21.416 73.8113 20.198 75.2873 19.334C76.7633 18.458 78.4613 18.02 80.3813 18.02C82.4213 18.02 84.1553 18.5 85.5833 19.46C87.0113 20.42 88.0673 21.77 88.7513 23.51C89.4353 25.25 89.6753 27.296 89.4713 29.648H84.6293V27.848C84.6293 25.868 84.3113 24.446 83.6753 23.582C83.0513 22.706 82.0253 22.268 80.5973 22.268C78.9293 22.268 77.6993 22.778 76.9073 23.798C76.1273 24.806 75.7373 26.3 75.7373 28.28C75.7373 30.092 76.1273 31.496 76.9073 32.492C77.6993 33.476 78.8573 33.968 80.3813 33.968C81.3413 33.968 82.1633 33.758 82.8473 33.338C83.5313 32.918 84.0533 32.312 84.4133 31.52L89.3093 32.924C88.5773 34.7 87.4193 36.08 85.8353 37.064C84.2633 38.048 82.5413 38.54 80.6693 38.54ZM74.2253 29.648V26.012H87.1133V29.648H74.2253ZM98.5841 38.54C97.1921 38.54 96.0101 38.276 95.0381 37.748C94.0781 37.208 93.3461 36.494 92.8421 35.606C92.3501 34.706 92.1041 33.716 92.1041 32.636C92.1041 31.736 92.2421 30.914 92.5181 30.17C92.7941 29.426 93.2381 28.772 93.8501 28.208C94.4741 27.632 95.3081 27.152 96.3521 26.768C97.0721 26.504 97.9301 26.27 98.9261 26.066C99.9221 25.862 101.05 25.67 102.31 25.49C103.57 25.298 104.956 25.088 106.468 24.86L104.704 25.832C104.704 24.68 104.428 23.834 103.876 23.294C103.324 22.754 102.4 22.484 101.104 22.484C100.384 22.484 99.6341 22.658 98.8541 23.006C98.0741 23.354 97.5281 23.972 97.2161 24.86L92.7881 23.456C93.2801 21.848 94.2041 20.54 95.5601 19.532C96.9161 18.524 98.7641 18.02 101.104 18.02C102.82 18.02 104.344 18.284 105.676 18.812C107.008 19.34 108.016 20.252 108.7 21.548C109.084 22.268 109.312 22.988 109.384 23.708C109.456 24.428 109.492 25.232 109.492 26.12V38H105.208V34.004L105.82 34.832C104.872 36.14 103.846 37.088 102.742 37.676C101.65 38.252 100.264 38.54 98.5841 38.54ZM99.6281 34.688C100.528 34.688 101.284 34.532 101.896 34.22C102.52 33.896 103.012 33.53 103.372 33.122C103.744 32.714 103.996 32.372 104.128 32.096C104.38 31.568 104.524 30.956 104.56 30.26C104.608 29.552 104.632 28.964 104.632 28.496L106.072 28.856C104.62 29.096 103.444 29.3 102.544 29.468C101.644 29.624 100.918 29.768 100.366 29.9C99.8141 30.032 99.3281 30.176 98.9081 30.332C98.4281 30.524 98.0381 30.734 97.7381 30.962C97.4501 31.178 97.2341 31.418 97.0901 31.682C96.9581 31.946 96.8921 32.24 96.8921 32.564C96.8921 33.008 97.0001 33.392 97.2161 33.716C97.4441 34.028 97.7621 34.268 98.1701 34.436C98.5781 34.604 99.0641 34.688 99.6281 34.688ZM114.172 38V18.56H118.492V23.312L118.024 22.7C118.276 22.028 118.612 21.416 119.032 20.864C119.452 20.312 119.968 19.856 120.58 19.496C121.048 19.208 121.558 18.986 122.11 18.83C122.662 18.662 123.232 18.56 123.82 18.524C124.408 18.476 124.996 18.488 125.584 18.56V23.132C125.044 22.964 124.414 22.91 123.694 22.97C122.986 23.018 122.344 23.18 121.768 23.456C121.192 23.72 120.706 24.074 120.31 24.518C119.914 24.95 119.614 25.466 119.41 26.066C119.206 26.654 119.104 27.32 119.104 28.064V38H114.172ZM136.621 47.18C135.517 47.18 134.467 47 133.471 46.64C132.475 46.292 131.581 45.8 130.789 45.164C130.009 44.54 129.373 43.808 128.881 42.968L133.417 40.772C133.729 41.348 134.173 41.786 134.749 42.086C135.337 42.386 135.973 42.536 136.657 42.536C137.389 42.536 138.079 42.41 138.727 42.158C139.375 41.918 139.891 41.552 140.275 41.06C140.671 40.58 140.857 39.98 140.833 39.26V33.608H141.445V18.56H145.729V39.332C145.729 39.812 145.705 40.262 145.657 40.682C145.621 41.114 145.549 41.54 145.441 41.96C145.129 43.148 144.547 44.126 143.695 44.894C142.855 45.662 141.823 46.232 140.599 46.604C139.375 46.988 138.049 47.18 136.621 47.18ZM136.189 38.54C134.401 38.54 132.835 38.09 131.491 37.19C130.147 36.29 129.097 35.066 128.341 33.518C127.597 31.97 127.225 30.224 127.225 28.28C127.225 26.3 127.603 24.542 128.359 23.006C129.127 21.458 130.201 20.24 131.581 19.352C132.961 18.464 134.581 18.02 136.441 18.02C138.289 18.02 139.843 18.47 141.103 19.37C142.363 20.27 143.317 21.494 143.965 23.042C144.613 24.59 144.937 26.336 144.937 28.28C144.937 30.224 144.607 31.97 143.947 33.518C143.299 35.066 142.327 36.29 141.031 37.19C139.735 38.09 138.121 38.54 136.189 38.54ZM136.981 34.184C138.073 34.184 138.943 33.938 139.591 33.446C140.251 32.954 140.725 32.264 141.013 31.376C141.301 30.488 141.445 29.456 141.445 28.28C141.445 27.104 141.301 26.072 141.013 25.184C140.725 24.296 140.263 23.606 139.627 23.114C139.003 22.622 138.181 22.376 137.161 22.376C136.069 22.376 135.169 22.646 134.461 23.186C133.765 23.714 133.249 24.428 132.913 25.328C132.577 26.216 132.409 27.2 132.409 28.28C132.409 29.372 132.571 30.368 132.895 31.268C133.219 32.156 133.717 32.864 134.389 33.392C135.061 33.92 135.925 34.184 136.981 34.184ZM153.254 46.64L156.998 36.344L157.07 39.368L148.61 18.56H153.686L159.374 33.284H158.222L163.874 18.56H168.77L157.79 46.64H153.254ZM194.701 38V26.516C194.701 25.232 194.395 24.236 193.783 23.528C193.183 22.808 192.349 22.448 191.281 22.448C190.597 22.448 190.003 22.61 189.499 22.934C188.995 23.246 188.599 23.69 188.311 24.266C188.035 24.83 187.897 25.484 187.897 26.228L185.845 24.86C185.845 23.528 186.157 22.352 186.781 21.332C187.417 20.312 188.263 19.52 189.319 18.956C190.387 18.38 191.569 18.092 192.865 18.092C195.085 18.092 196.759 18.752 197.887 20.072C199.027 21.38 199.597 23.096 199.597 25.22V38H194.701ZM171.265 38V18.56H175.585V25.004H176.197V38H171.265ZM183.001 38V26.516C183.001 25.232 182.695 24.236 182.083 23.528C181.483 22.808 180.649 22.448 179.581 22.448C178.561 22.448 177.739 22.802 177.115 23.51C176.503 24.206 176.197 25.112 176.197 26.228L174.145 24.788C174.145 23.516 174.463 22.376 175.099 21.368C175.735 20.36 176.587 19.562 177.655 18.974C178.735 18.386 179.941 18.092 181.273 18.092C182.797 18.092 184.045 18.416 185.017 19.064C186.001 19.712 186.727 20.576 187.195 21.656C187.663 22.736 187.897 23.924 187.897 25.22V38H183.001Z"
                    fill="#0369A1"
               />
               <path
                    fill-rule="evenodd"
                    clip-rule="evenodd"
                    d="M168.392 19.3561H164C164 15.8457 166.622 13 169.856 13C173.09 13 175.712 15.8457 175.712 19.3561H171.32C171.32 18.4785 170.665 17.7671 169.856 17.7671C169.048 17.7671 168.392 18.4785 168.392 19.3561Z"
                    fill="#0369A1"
               />
               <path
                    d="M13.5025 28.5H19.4975M30.9375 31.9375V25.0625M2.0625 31.9375V25.0625M23.6225 36.75C26.9225 36.75 27.7475 34.8937 27.7475 32.625V24.375C27.7475 22.1063 26.9225 20.25 23.6225 20.25C20.3225 20.25 19.4975 22.1063 19.4975 24.375V32.625C19.4975 34.8937 20.3225 36.75 23.6225 36.75ZM9.3775 36.75C6.0775 36.75 5.2525 34.8937 5.2525 32.625V24.375C5.2525 22.1063 6.0775 20.25 9.3775 20.25C12.6775 20.25 13.5025 22.1063 13.5025 24.375V32.625C13.5025 34.8937 12.6775 36.75 9.3775 36.75Z"
                    stroke="#0369A1"
                    stroke-width="2.5"
                    stroke-linecap="round"
                    stroke-linejoin="round"
               />
               <path
                    d="M174.972 67.21C174.249 67.21 173.595 67.0863 173.012 66.839C172.433 66.587 171.955 66.23 171.577 65.768C171.204 65.3013 170.961 64.7483 170.849 64.109L172.375 63.878C172.529 64.494 172.851 64.9747 173.341 65.32C173.831 65.6607 174.403 65.831 175.056 65.831C175.462 65.831 175.835 65.768 176.176 65.642C176.517 65.5113 176.79 65.327 176.995 65.089C177.205 64.8463 177.31 64.557 177.31 64.221C177.31 64.039 177.277 63.878 177.212 63.738C177.151 63.598 177.065 63.4767 176.953 63.374C176.846 63.2667 176.713 63.1757 176.554 63.101C176.4 63.0217 176.23 62.954 176.043 62.898L173.46 62.135C173.208 62.0603 172.951 61.9647 172.69 61.848C172.429 61.7267 172.188 61.5703 171.969 61.379C171.754 61.183 171.579 60.9427 171.444 60.658C171.309 60.3687 171.241 60.0187 171.241 59.608C171.241 58.9873 171.4 58.4623 171.717 58.033C172.039 57.599 172.473 57.2723 173.019 57.053C173.565 56.829 174.176 56.717 174.853 56.717C175.534 56.7263 176.143 56.8477 176.68 57.081C177.221 57.3143 177.669 57.6503 178.024 58.089C178.383 58.523 178.631 59.0503 178.766 59.671L177.198 59.937C177.128 59.559 176.979 59.2347 176.75 58.964C176.521 58.6887 176.241 58.4787 175.91 58.334C175.579 58.1847 175.219 58.1077 174.832 58.103C174.459 58.0937 174.116 58.1497 173.803 58.271C173.495 58.3923 173.248 58.5627 173.061 58.782C172.879 59.0013 172.788 59.2533 172.788 59.538C172.788 59.818 172.87 60.0443 173.033 60.217C173.196 60.3897 173.397 60.5273 173.635 60.63C173.878 60.728 174.118 60.8097 174.356 60.875L176.218 61.4C176.451 61.4653 176.715 61.554 177.009 61.666C177.308 61.7733 177.595 61.925 177.87 62.121C178.15 62.317 178.381 62.5783 178.563 62.905C178.745 63.227 178.836 63.633 178.836 64.123C178.836 64.6317 178.733 65.0797 178.528 65.467C178.323 65.8497 178.04 66.1717 177.681 66.433C177.326 66.6897 176.916 66.8833 176.449 67.014C175.982 67.1447 175.49 67.21 174.972 67.21ZM184.654 67C184.178 67.0933 183.711 67.133 183.254 67.119C182.796 67.105 182.388 67.0163 182.029 66.853C181.669 66.6897 181.399 66.433 181.217 66.083C181.053 65.7703 180.965 65.453 180.951 65.131C180.941 64.8043 180.937 64.4357 180.937 64.025V57.34H182.407V63.955C182.407 64.2583 182.409 64.522 182.414 64.746C182.423 64.97 182.472 65.159 182.561 65.313C182.729 65.6023 182.995 65.768 183.359 65.81C183.727 65.8473 184.159 65.831 184.654 65.761V67ZM179.488 60.616V59.44H184.654V60.616H179.488ZM188.383 67.21C187.823 67.21 187.354 67.1073 186.976 66.902C186.598 66.692 186.311 66.4167 186.115 66.076C185.923 65.7307 185.828 65.3527 185.828 64.942C185.828 64.5593 185.895 64.2233 186.031 63.934C186.166 63.6447 186.367 63.3997 186.633 63.199C186.899 62.9937 187.225 62.828 187.613 62.702C187.949 62.604 188.329 62.5177 188.754 62.443C189.178 62.3683 189.624 62.2983 190.091 62.233C190.562 62.1677 191.029 62.1023 191.491 62.037L190.959 62.331C190.968 61.7383 190.842 61.2997 190.581 61.015C190.324 60.7257 189.881 60.581 189.251 60.581C188.854 60.581 188.49 60.6743 188.159 60.861C187.827 61.043 187.596 61.3463 187.466 61.771L186.101 61.351C186.287 60.7023 186.642 60.1867 187.165 59.804C187.692 59.4213 188.392 59.23 189.265 59.23C189.941 59.23 190.529 59.3467 191.029 59.58C191.533 59.8087 191.901 60.1727 192.135 60.672C192.256 60.9193 192.331 61.1807 192.359 61.456C192.387 61.7313 192.401 62.0277 192.401 62.345V67H191.106V65.271L191.358 65.495C191.045 66.0737 190.646 66.5053 190.161 66.79C189.68 67.07 189.087 67.21 188.383 67.21ZM188.642 66.013C189.057 66.013 189.414 65.9407 189.713 65.796C190.011 65.6467 190.252 65.4577 190.434 65.229C190.616 65.0003 190.735 64.7623 190.791 64.515C190.87 64.291 190.914 64.039 190.924 63.759C190.938 63.479 190.945 63.255 190.945 63.087L191.421 63.262C190.959 63.332 190.539 63.395 190.161 63.451C189.783 63.507 189.44 63.563 189.132 63.619C188.828 63.6703 188.558 63.7333 188.32 63.808C188.119 63.878 187.939 63.962 187.781 64.06C187.627 64.158 187.503 64.277 187.41 64.417C187.321 64.557 187.277 64.7273 187.277 64.928C187.277 65.124 187.326 65.306 187.424 65.474C187.522 65.6373 187.671 65.768 187.872 65.866C188.072 65.964 188.329 66.013 188.642 66.013ZM194.911 67V59.174C194.911 58.9827 194.918 58.7797 194.932 58.565C194.946 58.3457 194.986 58.131 195.051 57.921C195.121 57.7063 195.236 57.5103 195.394 57.333C195.586 57.123 195.796 56.9737 196.024 56.885C196.253 56.7963 196.479 56.745 196.703 56.731C196.932 56.717 197.142 56.71 197.333 56.71H198.285V57.914H197.403C197.058 57.914 196.799 58.0003 196.626 58.173C196.458 58.341 196.374 58.5813 196.374 58.894V67H194.911ZM193.658 60.616V59.44H198.285V60.616H193.658ZM199.489 67V59.174C199.489 58.9827 199.496 58.7797 199.51 58.565C199.524 58.3457 199.564 58.131 199.629 57.921C199.699 57.7063 199.814 57.5103 199.972 57.333C200.164 57.123 200.374 56.9737 200.602 56.885C200.831 56.7963 201.057 56.745 201.281 56.731C201.51 56.717 201.72 56.71 201.911 56.71H202.863V57.914H201.981C201.636 57.914 201.377 58.0003 201.204 58.173C201.036 58.341 200.952 58.5813 200.952 58.894V67H199.489ZM198.236 60.616V59.44H202.863V60.616H198.236Z"
                    fill="#0369A1"
               />
          </svg>

          {#if active == "0"}
               <button
                    class="py-2 px-2 my-1 bg-[#EEEEF2] transition-colors duration-200 border-[#DDDDDD] border-[1px] rounded-lg w-full text-left inline-flex items-center"
               >
                    <span>Book</span>
               </button> <br />
               <button
                    on:click={() =>
                         goto("/employees/amend", { replaceState: false })}
                    class="py-2 px-2 my-1 hover:bg-[#EEEEF2] transition-colors duration-200 hover:border-[#DDDDDD] border-[#FFFFFF] border-[1px] rounded-lg w-full text-left inline-flex items-center"
               >
                    <span>Amendments</span>
               </button>
          {:else if active == "1"}
               <button
                    on:click={() =>
                         goto("/employees/book", { replaceState: true })}
                    class="py-2 px-2 my-1 transition-colors duration-200 hover:bg-[#EEEEF2] border-[#FFFFFF] transition-colors duration-200 hover:border-[#DDDDDD] border-[1px] rounded-lg w-full text-left inline-flex items-center"
               >
                    <span>Book</span>
               </button> <br />
               <button
                    class="py-2 px-2 my-1 bg-[#EEEEF2] transition-colors duration-200 border-[#DDDDDD] border-[1px] rounded-lg w-full text-left inline-flex items-center"
               >
                    <span>Amendments</span>
               </button>
          {/if}
     </div>

     <!--Account related UI-->
     <div class="place-self-center self-end">
          <hr class="rounded bg-[#EDEDEF]" />
          <!-- svelte-ignore a11y-mouse-events-have-key-events -->
          <div class="flex mt-6">
               <div class="flex select-none grid p-3 rounded-lg bg-mainBlue">
                    <p
                         class="text-white font-bold text-center text-auto self-center justify-self-center"
                    >
                         {firstName[0] + lastName[0]}
                    </p>
               </div>
               <p
                    class="text-[#1A1A1A] pl-2 self-center font-semibold text-auto text-[#1A1A1A] select-none"
               >
                    {firstName + " " + lastName}
               </p>
          </div>

          <button
               class="mt-8 py-2 px-2 my-1 transition-colors duration-200 hover:bg-[#EEEEF2] border-[#FFFFFF] transition-colors duration-200 hover:border-[#DDDDDD] border-[1px] rounded-lg w-full text-left inline-flex items-center"
          >
               <img class="pr-3" src="../setting.svg" alt="settings icon" />
               <span>Settings</span>
          </button> <br />
          <button
               on:click={() => logout()}
               class="py-2 px-2 my-1 hover:bg-[#EEEEF2] transition-colors duration-200 hover:border-[#DDDDDD] border-[#FFFFFF] border-[1px] rounded-lg w-full text-left inline-flex items-center"
          >
               <img class="pr-3" src="../logout.svg" alt="logout icon" />
               <span>Logout</span>
          </button>
     </div>
</div>
